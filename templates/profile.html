{% extends "base.html" %}

{% block body %}

<main class="flex-shrink-0">
    <div class="bg-light p-5 rounded">
        {% if session['user_id'] %}
        <h2 class="inter-semibold">Profile</h2>

        <form>
            <div class="row">

                <div class="col-md-6">
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="name">Name</label>
                            <input required type="text" class="form-control inter-regular" id="name" name="name"
                                value="{{ user.name }}">
                        </div>
                    </div>
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="email">Email</label>
                            <input required type="email" class="form-control inter-regular" id="email" name="email"
                                value="{{ user.email }}">
                        </div>
                    </div>
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="gender">Gender</label>
                            <input required class="form-control inter-regular" type="text" id="gender" name="gender"
                                value="{{user.gender}}">
                        </div>
                    </div>
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="course">Course</label>
                            <input required class="form-control inter-regular" type="text" id="course" name="course"
                                value="{{user.course}}">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="username">Username</label>
                            <input required type="text" class="form-control inter-regular" id="username" name="username"
                                value="{{ user.username }}">
                        </div>
                    </div>
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="password">Password</label>
                            <div class="input-group">
                                <input required class="form-control inter-regular" type="password" id="password"
                                    name="password" value="{{user.password}}">
                                <div class="input-group-addon">
                                    <i class="material-symbols-outlined togglePassword" data-target="password">
                                        visibility_off
                                    </i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="age">Age</label>
                            <input required class="form-control inter-regular" type="number" id="age" name="age"
                                value="{{user.age}}">
                        </div>
                    </div>
                    <div class="py-2">
                        <div class="form-group">
                            <label class="inter-regular" for="interests">Interests</label>
                            <input required class="form-control inter-regular" type="text" id="interests"
                                name="interests" value="{{user.interests}}">
                        </div>
                    </div>

                </div>
            </div>
        </form>

        {% else %}
        <div class="text-center">
            <h1 class="salsa-regular">Welcome to the School Dating App</h1>
            <p class="inter-regular">Please <a href="{{ url_for('login') }}">login</a> or <a
                    href="{{ url_for('register') }}">register</a> to view profiles.</p>
            <img src="../static/images/picture.png" id="picture" alt="Two people">
        </div>
        {% endif %}
    </div>
    <script>
        /*Toggle visibility for password field*/
        function togglePassword() {
            var icons = document.querySelectorAll(".togglePassword");

            icons.forEach(function (icon) {
                var passwordField = document.getElementById(icon.dataset.target);

                // Function to toggle visibility on long press
                function toggleVisibility() {
                    if (passwordField.type === "password") {
                        passwordField.type = "text";
                        icon.textContent = "visibility";
                    } else {
                        passwordField.type = "password";
                        icon.textContent = "visibility_off";
                    }
                }

                icon.addEventListener("mousedown", function () {
                    toggleVisibility();
                });

                icon.addEventListener("mouseup", function (event) {
                    toggleVisibility();
                });
            });
        }

        togglePassword();
    </script>
</main>
{% endblock %}